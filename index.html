<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Coffee Water Calculator</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>Coffee Water Calculator</h1>
    <p class="subtitle">Dial in your water chemistry for better coffee</p>
  </header>

  <main>
    <!-- Step 1: Volume -->
    <section class="card">
      <h2>How much water?</h2>
      <div class="input-group">
        <label for="volume">Volume</label>
        <div class="input-with-unit">
          <input type="number" id="volume" value="1" min="0.1" step="0.1">
          <select id="volume-unit">
            <option value="liters">Liters</option>
            <option value="gallons">Gallons</option>
          </select>
        </div>
      </div>
    </section>

    <!-- Step 2: Source Water -->
    <section class="card">
      <h2>Starting water</h2>
      <p class="hint">Select your base water. Configure custom values on the <a href="minerals.html">Settings</a> page.</p>
      <div class="input-group">
        <label for="source-preset">Source Water</label>
        <select id="source-preset">
          <!-- Populated by JS from SOURCE_PRESETS -->
        </select>
      </div>
      <div class="source-water-tags" id="source-water-tags"></div>
    </section>

    <!-- Step 3: Target Profile -->
    <section class="card">
      <h2>Target water profile</h2>
      <div class="profile-buttons" id="profile-buttons">
        <!-- Populated by JS -->
      </div>

      <div class="save-bar" id="target-save-bar" style="display:none;">
        <input type="text" id="target-profile-name" placeholder="Name this profile..." maxlength="40">
        <button id="target-save-btn" class="preset-btn">Save</button>
      </div>

      <div class="edit-bar" id="target-edit-bar" style="display:none;">
        <button id="target-save-changes-btn" class="preset-btn">Save Changes</button>
      </div>
      <div class="input-row target-inputs">
        <div class="input-group">
          <label for="target-calcium">Calcium (mg/L)</label>
          <input type="number" id="target-calcium" value="51" min="0" step="1">
        </div>
        <div class="input-group">
          <label for="target-magnesium">Magnesium (mg/L)</label>
          <input type="number" id="target-magnesium" value="17" min="0" step="1">
        </div>
        <div class="input-group">
          <label for="target-alkalinity">Alkalinity (mg/L as CaCO3)</label>
          <input type="number" id="target-alkalinity" value="40" min="0" step="1">
        </div>
      </div>
      <p class="profile-description" id="profile-description">
        SCA recommended range for brewing water. Balanced body and clarity.
      </p>
    </section>

    <!-- Results -->
    <section class="card results-card">
      <h2>Add to your water</h2>
      <p class="hint" id="results-hint">Using distilled/RO water as your base, add these mineral salts:</p>
      <div class="results" id="results-container">
        <!-- Populated by JS from selected minerals in Settings -->
      </div>
      <div class="result-summary" id="result-summary"></div>
    </section>
  </main>

  <div class="confirm-overlay" id="confirm-overlay" style="display:none;">
    <div class="confirm-dialog">
      <p id="confirm-message"></p>
      <div class="confirm-actions">
        <button id="confirm-yes" class="preset-btn">Yes</button>
        <button id="confirm-no" class="preset-btn">No</button>
      </div>
    </div>
  </div>

  <footer>
    <p>Start with distilled or RO water for best results. Use a 0.01g precision scale.</p>
  </footer>

  <script src="shared.js"></script>
  <script src="script.js"></script>
</body>
</html>
